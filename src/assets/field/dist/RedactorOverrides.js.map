{"version":3,"file":"RedactorOverrides.js","mappings":"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","sources":["webpack:///./js/RedactorOverrides.js"],"sourcesContent":["// Adjust the positioning of image resizer\n// =============================================================================\n\nvar imageResizeClass = $R['classes']['image.resize'];\n\nimageResizeClass.prototype.init = function (app) {\n  this.app = app;\n  this.$doc = app.$doc;\n  this.$win = app.$win;\n  this.$body = app.$body;\n  this.editor = app.editor;\n  this.toolbar = app.toolbar;\n  this.inspector = app.inspector;\n\n  // init\n  this.$target = this.toolbar.isTarget()\n    ? this.toolbar.getTargetElement()\n    : this.$body;\n\n  // Change the target according to LP\n  var attachLivePreview = () => {\n    this.hide();\n    var $editor = $('.lp-editor');\n    if ($editor.length) {\n      this.$target = $R.dom($editor[0]);\n    }\n  };\n\n  var detachLivePreview = () => {\n    this.hide();\n    this.$target = this.toolbar.isTarget()\n      ? this.toolbar.getTargetElement()\n      : this.$body;\n  };\n\n  attachPreviewListeners(attachLivePreview, detachLivePreview);\n\n  this._init();\n};\n// Position the image resizer correctly\nimageResizeClass.prototype._setResizerPosition = function () {\n  if (this.$resizer) {\n    var isTarget = this.toolbar.isTarget();\n    var targetOffset = this.$target.offset();\n    var offsetFix = 7;\n    var topOffset = isTarget\n      ? offsetFix - targetOffset.top + this.$target.scrollTop()\n      : offsetFix;\n    var leftOffset = isTarget ? offsetFix - targetOffset.left : offsetFix;\n    var pos = this.$resizableImage.offset();\n    var width = this.$resizableImage.width();\n    var height = this.$resizableImage.height();\n    var resizerWidth = this.$resizer.width();\n    var resizerHeight = this.$resizer.height();\n\n    this.$resizer.css({\n      top: Math.round(pos.top + height - resizerHeight + topOffset) + 'px',\n      left: Math.round(pos.left + width - resizerWidth + leftOffset) + 'px',\n    });\n  }\n};\n\n// When scrolling, reposition the resizer\nimageResizeClass.prototype._build = function (e) {\n  this.$target.find('#redactor-image-resizer').remove();\n\n  var data = this.inspector.parse(e.target);\n  var $editor = this.editor.getElement();\n\n  if (data.isComponentType('image')) {\n    this.$resizableBox = $editor;\n    this.$resizableImage = $R.dom(data.getImageElement());\n\n    this.$resizer = $R.dom('<span>');\n    this.$resizer.attr('id', 'redactor-image-resizer');\n    this.$resizer.css({'z-index': 100});\n\n    this.$target.append(this.$resizer);\n\n    this._setResizerPosition();\n    this.$resizer.on('mousedown touchstart', this._set.bind(this));\n  }\n};\n// Stop listening to scroll\nimageResizeClass.prototype.hide = function () {\n  this.$target.find('#redactor-image-resizer').remove();\n  if (this.toolbar.isTarget()) {\n    this.$target.off('scroll.resizer', this.rebuild.bind(this));\n  } else {\n    $R.dom('#content-container').off('scroll.resizer', this.rebuild.bind(this));\n  }\n};\n\n// Adjust the positioning of fixed toolbar\n// =============================================================================\n\nvar toolbarFixedClass = $R['classes']['toolbar.fixed'];\n\ntoolbarFixedClass.prototype.livePreview = false;\ntoolbarFixedClass.prototype.$previousFixedTarget = false;\n\ntoolbarFixedClass.prototype._init = function () {\n  this.$fixedTarget = this.toolbar.isTarget()\n    ? this.toolbar.getTargetElement()\n    : this.$win;\n  this._doFixed();\n\n  if (this.toolbar.isTarget()) {\n    this.$win.on(\n      'scroll.redactor-toolbar-' + this.uuid,\n      this._doFixed.bind(this)\n    );\n    this.$win.on(\n      'resize.redactor-toolbar-' + this.uuid,\n      this._doFixed.bind(this)\n    );\n  }\n\n  this.$fixedTarget.on(\n    'scroll.redactor-toolbar-' + this.uuid,\n    this._doFixed.bind(this)\n  );\n  this.$fixedTarget.on(\n    'resize.redactor-toolbar-' + this.uuid,\n    this._doFixed.bind(this)\n  );\n\n  var attachLivePreview = () => {\n    var $editor = $('.lp-editor');\n    if ($editor.length) {\n      this.livePreview = true;\n      this.$previousFixedTarget = this.$fixedTarget;\n      $editor = $R.dom($editor[0]);\n      $editor.on(\n        'scroll.redactor-toolbar-' + this.uuid,\n        this._doFixed.bind(this)\n      );\n      this.$fixedTarget = $editor;\n    }\n  };\n\n  var detachLivePreview = () => {\n    this.livePreview = false;\n    this.$fixedTarget = this.$previousFixedTarget;\n    this.$previousFixedTarget = null;\n  };\n\n  attachPreviewListeners(attachLivePreview, detachLivePreview);\n};\n\ntoolbarFixedClass.prototype._doFixed = function () {\n  var $editor = this.editor.getElement();\n  var $container = this.container.getElement();\n  var $toolbar = this.toolbar.getElement();\n  var $wrapper = this.toolbar.getWrapper();\n\n  if (this.editor.isSourceMode()) {\n    return;\n  }\n\n  var $targets = $container.parents().filter(function (node) {\n    return getComputedStyle(node, null).display === 'none' ? node : false;\n  });\n\n  // has hidden parent\n  if ($targets.length !== 0) return;\n\n  var isHeight = $editor.height() < 100;\n  var isEmpty = this.editor.isEmpty();\n\n  if (isHeight || isEmpty) {\n    this.reset();\n    return;\n  }\n\n  var toolbarHeight = $toolbar.height();\n\n  var pinIt = false;\n  var pinDistance = 0;\n  var tolerance = 20;\n\n  if (this.livePreview) {\n    var headerBuffer = $('.lp-editor-container header.flex').length\n      ? $('.lp-editor-container header.flex').outerHeight()\n      : 0;\n    var distanceFromScreenTop = $editor.offset().top - headerBuffer;\n    var bottomFromScreenTop =\n      distanceFromScreenTop + $editor.height() - toolbarHeight;\n  } else {\n    var headerBuffer = $('body.fixed-header #header').length\n      ? $('body.fixed-header #header').outerHeight()\n      : 0;\n    var distanceFromScreenTop =\n      $editor.offset().top - this.$win.scrollTop() - headerBuffer;\n    var bottomFromScreenTop =\n      distanceFromScreenTop + $editor.height() - toolbarHeight;\n  }\n\n  pinIt = distanceFromScreenTop + tolerance < 0 && bottomFromScreenTop > 0;\n  pinDistance = $editor.scrollTop() + headerBuffer;\n\n  // Figure out when to pin the toolbar\n\n  if (pinIt) {\n    var position = this.detector.isDesktop() ? 'fixed' : 'absolute';\n    pinDistance = this.detector.isDesktop()\n      ? pinDistance\n      : scrollOffset - boxOffset + this.opts.toolbarFixedTopOffset;\n\n    if (this.detector.isMobile()) {\n      if (this.fixedScrollTimeout) {\n        clearTimeout(this.fixedScrollTimeout);\n      }\n\n      $toolbar.hide();\n      this.fixedScrollTimeout = setTimeout(function () {\n        $toolbar.show();\n      }, 250);\n    }\n\n    $wrapper.height(toolbarHeight);\n    $toolbar.addClass('redactor-toolbar-fixed');\n    $toolbar.css({\n      position: position,\n      top: pinDistance + this.opts.toolbarFixedTopOffset + 'px',\n      width: $container.width() + 'px',\n    });\n\n    var dropdown = this.toolbar.getDropdown();\n\n    if (dropdown) {\n      dropdown.updatePosition();\n    }\n\n    this.app.broadcast('toolbar.fixed');\n  } else {\n    this.reset();\n    this.app.broadcast('toolbar.unfixed');\n  }\n};\n\nvar inputCleanerService = $R['services']['cleaner'];\n\ninputCleanerService.prototype.input = function (html, paragraphize, started) {\n  // fix &curren; entity in the links\n  html = html.replace(/¤t/gi, '&current');\n\n  // store\n  var storedComments = [];\n  html = this.storeComments(html, storedComments);\n\n  // pre/code\n  html = this.encodeCode(html);\n\n  // sanitize\n  var $wrapper = this.utils.buildWrapper(html);\n  $wrapper\n    .find('a, b, i, strong, em, img, svg, details, audio')\n    .removeAttr('onload onerror ontoggle onwheel onmouseover oncopy');\n  $wrapper.find('a, iframe, embed').each(function (node) {\n    var $node = $R.dom(node);\n    var href = $node.attr('href');\n    var src = $node.attr('src');\n    if (href && href.trim().search(/^data|javascript:/i) !== -1)\n      $node.attr('href', '');\n    if (src && src.trim().search(/^data|javascript:/i) !== -1)\n      $node.attr('src', '');\n  });\n\n  var imageattrs = [\n    'alt',\n    'title',\n    'src',\n    'class',\n    'width',\n    'height',\n    'srcset',\n    'usemap',\n  ];\n  $wrapper.find('img').each(\n    function (node) {\n      if (node.attributes.length > 0) {\n        var attrs = node.attributes;\n        for (var i = attrs.length - 1; i >= 0; i--) {\n          var removeAttrs =\n            attrs[i].name.search(/^data-/) === -1 &&\n            imageattrs.indexOf(attrs[i].name) === -1;\n          var removeDataSrc =\n            attrs[i].name === 'src' &&\n            attrs[i].value.search(/^data|javascript:/i) !== -1;\n          if (this.opts.imageSrcData) removeDataSrc = false;\n\n          if (removeAttrs || removeDataSrc) {\n            node.removeAttribute(attrs[i].name);\n          }\n        }\n      }\n    }.bind(this)\n  );\n\n  // get wrapper html\n  html = this.utils.getWrapperHtml($wrapper);\n\n  // converting entity\n  html = html.replace(/\\$/g, '&#36;');\n  html = html.replace(/&amp;/g, '&');\n\n  // convert to figure\n  var converter = $R.create('cleaner.figure', this.app);\n  html = converter.convert(html, this.convertRules);\n\n  // store components\n  html = this.storeComponents(html);\n\n  // clean\n  html = this.replaceTags(html, this.opts.replaceTags);\n  html = this._setSpanAttr(html);\n  html = this._setStyleCache(html);\n  html = this.removeTags(html, this.deniedTags);\n  html = this.opts.removeScript\n    ? this._removeScriptTag(html)\n    : this._replaceScriptTag(html);\n  //html = (this.opts.removeScript) ? this._removeScriptTag(html) : html;\n  html = this.opts.removeComments ? this.removeComments(html) : html;\n  html = this._isSpacedEmpty(html) ? this.opts.emptyHtml : html;\n\n  // restore components\n  html = this.restoreComponents(html);\n\n  // clear wrapped components\n  html = this._cleanWrapped(html);\n\n  // restore comments\n  html = this.restoreComments(html, storedComments);\n\n  // paragraphize\n  html = paragraphize ? this.paragraphize(html) : html;\n\n  return html;\n};\n\ninputCleanerService.prototype.output = function (html, removeMarkers) {\n  html = this.removeInvisibleSpaces(html);\n\n  if (this.opts.breakline) {\n    html = html.replace(\n      /<\\/(span|strong|b|i|em)><br\\s?\\/?><\\/div>/gi,\n      '</$1></div>'\n    );\n    html = html.replace(\n      /<br\\s?\\/?><\\/(span|strong|b|i|em)><\\/div>/gi,\n      '</$1></div>'\n    );\n  }\n\n  html = html.replace(/&#36;/g, '$');\n\n  // empty\n  if (this._isSpacedEmpty(html)) return '';\n  if (this._isParagraphEmpty(html)) return '';\n\n  html = this.removeServiceTagsAndAttrs(html, removeMarkers);\n\n  // store components\n  html = this.storeComponents(html);\n\n  html = this.removeSpanWithoutAttributes(html);\n  html = this.removeFirstBlockBreaklineInHtml(html);\n\n  html = this.opts.removeScript ? html : this._unreplaceScriptTag(html);\n  html = this.opts.preClass ? this._setPreClass(html) : html;\n  html = this.opts.linkNofollow ? this._setLinkNofollow(html) : html;\n  html = this.opts.removeNewLines ? this.cleanNewLines(html) : html;\n\n  // restore components\n  html = this.restoreComponents(html);\n\n  // convert to figure\n  var converter = $R.create('cleaner.figure', this.app);\n  html = converter.unconvert(html, this.unconvertRules);\n\n  // final clean up\n  html = this.removeEmptyAttributes(html, ['style', 'class', 'rel', 'title']);\n  html = this.cleanSpacesInPre(html);\n  html = this.tidy(html);\n\n  // converting entity\n  html = html.replace(/&amp;/g, '&');\n\n  // breakline tidy\n  if (this.opts.breakline) {\n    html = html.replace(/<br\\s?\\/?>/gi, '<br>\\n');\n    html = html.replace(/<br\\s?\\/?>\\n+/gi, '<br>\\n');\n  }\n\n  // check whitespaces\n  html = html.replace(/\\n/g, '') === '' ? '' : html;\n\n  return html;\n};\n\nvar toolbarDropdownClass = $R['classes']['toolbar.dropdown'];\n\ntoolbarDropdownClass.prototype.updatePosition = function () {\n  var isFixed = this.toolbar.isFixed();\n  var isTarget = this.toolbar.isTarget();\n\n  var btnHeight = this.$btn.height();\n  var btnWidth = this.$btn.width();\n\n  var pos = this.$btn.offset();\n  var position = 'absolute';\n  var topOffset = 2;\n\n  if (isFixed) {\n    pos.top = isTarget ? this.$btn.offset().top : this.$btn.position().top;\n    position = 'fixed';\n    topOffset = topOffset + this.opts.toolbarFixedTopOffset;\n  }\n\n  var leftOffset = 0;\n  var left = pos.left + leftOffset;\n  var width = parseFloat(this.css('width'));\n  var winWidth = this.$win.width();\n  var leftFix = winWidth < left + width ? width - btnWidth : 0;\n  var leftPos = left - leftFix;\n  var top = pos.top + btnHeight + topOffset;\n\n  if (isFixed) {\n    var toolbarElement = this.toolbar.getElement();\n    top = toolbarElement.position().top + toolbarElement.height();\n  }\n\n  leftPos = leftPos < 0 ? 4 : leftPos;\n\n  this.css({\n    maxHeight: '',\n    position: position,\n    top: top + 'px',\n    left: leftPos + 'px',\n  });\n\n  // height adaptive\n  var heightTolerance = 10;\n  var winHeight = this.$win.height();\n  var scrollTop = this.$doc.scrollTop();\n  var cropHeight = winHeight - (top - scrollTop) - heightTolerance;\n\n  this.css('max-height', cropHeight + 'px');\n};\n\nvar contextBarClass = $R['modules']['contextbar'];\n\ncontextBarClass.prototype.init = function (app) {\n  this.app = app;\n  this.opts = app.opts;\n  this.uuid = app.uuid;\n  this.$win = app.$win;\n  this.$doc = app.$doc;\n  this.$body = app.$body;\n  this.editor = app.editor;\n  this.toolbar = app.toolbar;\n  this.detector = app.detector;\n  this.livePreview = false;\n\n  // local\n  this.$target = this.toolbar.isTarget()\n    ? this.toolbar.getTargetElement()\n    : this.$body;\n\n  // Change the target according to LP\n  var attachLivePreview = () => {\n    var $target = $('.lp-editor');\n    if ($target.length) {\n      $(this.$contextbar.get()).appendTo($target);\n      this.livePreview = true;\n    }\n  };\n\n  var detachLivePreview = () => {\n    var $target = this.toolbar.getTargetElement();\n    if ($target.length) {\n      $(this.$contextbar.get(0)).appendTo($target.get(0));\n    }\n    this.livePreview = false;\n  };\n\n  attachPreviewListeners(attachLivePreview, detachLivePreview);\n};\n\ncontextBarClass.prototype.close = function (e) {\n  if (!this.$contextbar) return;\n  if (e) {\n    var $target = $R.dom(e.target);\n    if (this.$el && $target.closest(this.$el).length !== 0) {\n      return;\n    }\n  }\n\n  this.$contextbar.hide();\n  this.$contextbar.removeClass('open');\n  this.$doc.off('.redactor.context');\n  this.app.broadcast('hardsync');\n};\n\nvar toolbarService = $R['services']['toolbar'];\n\ntoolbarService.prototype.addButton = function (\n  name,\n  btnObj,\n  position,\n  $el,\n  start\n) {\n  position = position || 'end';\n\n  var $button = $R.create('toolbar.button', this.app, name, btnObj);\n  if (btnObj.observe) {\n    this.opts.activeButtonsObservers[name] = {\n      observe: btnObj.observe,\n      button: $button,\n    };\n  }\n\n  if (this.is()) {\n    if (position === 'first') this.$toolbar.prepend($button);\n    else if (position === 'after') $el.after($button);\n    else if (position === 'before') $el.before($button);\n    else {\n      var index = this.opts.buttons.indexOf(name);\n\n      if (start !== true && index !== -1) {\n        if (index === 0) {\n          this.$toolbar.prepend($button);\n        } else {\n          var $btns = this._findButtons();\n\n          // If this was an added button, it might not exist in the options with how things are, so make sure to stay inside bounds\n          var $btn = $btns.eq(Math.min(index, $btns.length) - 1);\n          $btn.after($button);\n        }\n      } else {\n        this.$toolbar.append($button);\n      }\n    }\n  }\n\n  return $button;\n};\n\nfunction attachPreviewListeners(openCallback, closeCallback) {\n  Garnish.on(Craft.Preview, 'open', openCallback);\n  Garnish.on(Craft.LivePreview, 'enter', openCallback);\n\n  Garnish.on(Craft.Preview, 'close', closeCallback);\n  Garnish.on(Craft.LivePreview, 'exit', closeCallback);\n}\n"],"names":["imageResizeClass","$R","prototype","init","app","$doc","$win","$body","editor","toolbar","inspector","$target","isTarget","getTargetElement","attachLivePreview","hide","$editor","$","length","dom","detachLivePreview","attachPreviewListeners","_init","_setResizerPosition","$resizer","targetOffset","offset","offsetFix","topOffset","top","scrollTop","leftOffset","left","pos","$resizableImage","width","height","resizerWidth","resizerHeight","css","Math","round","_build","e","find","remove","data","parse","target","getElement","isComponentType","$resizableBox","getImageElement","attr","append","on","_set","bind","off","rebuild","toolbarFixedClass","livePreview","$previousFixedTarget","$fixedTarget","_doFixed","uuid","$container","container","$toolbar","$wrapper","getWrapper","isSourceMode","$targets","parents","filter","node","getComputedStyle","display","isHeight","isEmpty","reset","toolbarHeight","pinIt","pinDistance","tolerance","headerBuffer","outerHeight","distanceFromScreenTop","bottomFromScreenTop","position","detector","isDesktop","scrollOffset","boxOffset","opts","toolbarFixedTopOffset","isMobile","fixedScrollTimeout","clearTimeout","setTimeout","show","addClass","dropdown","getDropdown","updatePosition","broadcast","inputCleanerService","input","html","paragraphize","started","replace","storedComments","storeComments","encodeCode","utils","buildWrapper","removeAttr","each","$node","href","src","trim","search","imageattrs","attributes","attrs","i","removeAttrs","name","indexOf","removeDataSrc","value","imageSrcData","removeAttribute","getWrapperHtml","converter","create","convert","convertRules","storeComponents","replaceTags","_setSpanAttr","_setStyleCache","removeTags","deniedTags","removeScript","_removeScriptTag","_replaceScriptTag","removeComments","_isSpacedEmpty","emptyHtml","restoreComponents","_cleanWrapped","restoreComments","output","removeMarkers","removeInvisibleSpaces","breakline","_isParagraphEmpty","removeServiceTagsAndAttrs","removeSpanWithoutAttributes","removeFirstBlockBreaklineInHtml","_unreplaceScriptTag","preClass","_setPreClass","linkNofollow","_setLinkNofollow","removeNewLines","cleanNewLines","unconvert","unconvertRules","removeEmptyAttributes","cleanSpacesInPre","tidy","toolbarDropdownClass","isFixed","btnHeight","$btn","btnWidth","parseFloat","winWidth","leftFix","leftPos","toolbarElement","maxHeight","heightTolerance","winHeight","cropHeight","contextBarClass","$contextbar","get","appendTo","close","$el","closest","removeClass","toolbarService","addButton","btnObj","start","$button","observe","activeButtonsObservers","button","is","prepend","after","before","index","buttons","$btns","_findButtons","eq","min","openCallback","closeCallback","Garnish","Craft","Preview","LivePreview"],"sourceRoot":""}