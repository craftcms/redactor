{"version":3,"file":"CraftAssetFiles.js","mappings":"YAAA,IAAIA,EAASC,EAAEC,OAAO,GAAIC,MAAMC,SAASC,WAAY,CACnDC,MAAO,OACPC,UAAW,mCACXC,KAAM,+BACNC,QAAS,KAETC,UAAW,WACTC,KAAKC,cAAcD,KAAKE,UAEgB,IAA7BF,KAAKG,oBAEdH,KAAKG,oBAAsBX,MAAMY,2BAC/B,yBACA,CACEC,WAAY,4BACZC,QAASN,KAAKF,QACdS,SAAU,CAACC,OAAQR,KAAKS,eACxBC,SAAUpB,EAAEqB,OAAM,SAAUC,GAC1B,GAAIA,EAASC,OAAQ,CACnBb,KAAKc,iBAAiBd,KAAKE,KAC3B,IAAMa,EAAUH,EAAS,GACnBI,EAAehB,KAAKE,IAAIe,UAAUC,UAClCC,EAAO,CACXC,IAAKL,EAAQK,IAAM,UAAYL,EAAQM,GACvCC,KAAMN,EAAaH,OAAS,EAAIG,EAAeD,EAAQQ,OAEzDvB,KAAKE,IAAIsB,IAAI,qBAAsBL,MAEpCnB,MACHyB,kBAAkB,IAItBzB,KAAKG,oBAAoBuB,QAI7BC,WAAY,SAAU7B,GACpBE,KAAKF,QAAUA,KAMhBL,SADEmC,IAAI,SAAU,kBAAmBvC,G","sources":["webpack:///./js/CraftAssetFiles.js"],"sourcesContent":["var plugin = $.extend({}, Craft.Redactor.PluginBase, {\n  title: 'file',\n  apiTarget: 'plugin.craftAssetFiles.showModal',\n  icon: '<i class=\"re-icon-file\"></i>',\n  volumes: null,\n\n  showModal: function () {\n    this.saveSelection(this.app);\n\n    if (typeof this.assetSelectionModal === 'undefined') {\n      var refHandle = arguments.refHandle;\n      this.assetSelectionModal = Craft.createElementSelectorModal(\n        'craft\\\\elements\\\\Asset',\n        {\n          storageKey: 'RedactorInput.LinkToAsset',\n          sources: this.volumes,\n          criteria: {siteId: this.elementSiteId},\n          onSelect: $.proxy(function (elements) {\n            if (elements.length) {\n              this.restoreSelection(this.app);\n              const element = elements[0];\n              const selectedText = this.app.selection.getText();\n              const data = {\n                url: element.url + '#asset:' + element.id,\n                text: selectedText.length > 0 ? selectedText : element.label,\n              };\n              this.app.api('module.link.insert', data);\n            }\n          }, this),\n          closeOtherModals: false,\n        }\n      );\n    } else {\n      this.assetSelectionModal.show();\n    }\n  },\n\n  setVolumes: function (volumes) {\n    this.volumes = volumes;\n  },\n});\n\n(function ($R) {\n  $R.add('plugin', 'craftAssetFiles', plugin);\n})(Redactor);\n"],"names":["plugin","$","extend","Craft","Redactor","PluginBase","title","apiTarget","icon","volumes","showModal","this","saveSelection","app","assetSelectionModal","createElementSelectorModal","storageKey","sources","criteria","siteId","elementSiteId","onSelect","proxy","elements","length","restoreSelection","element","selectedText","selection","getText","data","url","id","text","label","api","closeOtherModals","show","setVolumes","add"],"sourceRoot":""}