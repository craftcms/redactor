{"version":3,"file":"CraftAssetFiles.js","mappings":";;;;;AAAA,IAAIA,MAAM,GAAGC,CAAC,CAACC,MAAF,CAAS,EAAT,EAAaC,KAAK,CAACC,QAAN,CAAeC,UAA5B,EAAwC;EACnDC,KAAK,EAAE,MAD4C;EAEnDC,SAAS,EAAE,kCAFwC;EAGnDC,IAAI,EAAE,8BAH6C;EAInDC,OAAO,EAAE,IAJ0C;EAMnDC,SAAS,EAAE,qBAAY;IACrB,KAAKC,aAAL,CAAmB,KAAKC,GAAxB;;IAEA,IAAI,OAAO,KAAKC,mBAAZ,KAAoC,WAAxC,EAAqD;MACnD,IAAIC,SAAS,GAAGC,SAAS,CAACD,SAA1B;MACA,KAAKD,mBAAL,GAA2BV,KAAK,CAACa,0BAAN,CACzB,wBADyB,EAEzB;QACEC,UAAU,EAAE,2BADd;QAEEC,OAAO,EAAE,KAAKT,OAFhB;QAGEU,QAAQ,EAAE;UAACC,MAAM,EAAE,KAAKC;QAAd,CAHZ;QAIEC,QAAQ,EAAErB,CAAC,CAACsB,KAAF,CAAQ,UAAUC,QAAV,EAAoB;UACpC,IAAIA,QAAQ,CAACC,MAAb,EAAqB;YACnB,KAAKC,gBAAL,CAAsB,KAAKd,GAA3B;YACA,IAAMe,OAAO,GAAGH,QAAQ,CAAC,CAAD,CAAxB;YACA,IAAMI,YAAY,GAAG,KAAKhB,GAAL,CAASiB,SAAT,CAAmBC,OAAnB,EAArB;YACA,IAAMC,IAAI,GAAG;cACXC,GAAG,EAAEL,OAAO,CAACK,GAAR,GAAc,SAAd,GAA0BL,OAAO,CAACM,EAD5B;cAEXC,IAAI,EAAEN,YAAY,CAACH,MAAb,GAAsB,CAAtB,GAA0BG,YAA1B,GAAyCD,OAAO,CAACQ;YAF5C,CAAb;YAIA,KAAKvB,GAAL,CAASwB,GAAT,CAAa,oBAAb,EAAmCL,IAAnC;UACD;QACF,CAXS,EAWP,IAXO,CAJZ;QAgBEM,gBAAgB,EAAE;MAhBpB,CAFyB,CAA3B;IAqBD,CAvBD,MAuBO;MACL,KAAKxB,mBAAL,CAAyByB,IAAzB;IACD;EACF,CAnCkD;EAqCnDC,UAAU,EAAE,oBAAU9B,OAAV,EAAmB;IAC7B,KAAKA,OAAL,GAAeA,OAAf;EACD;AAvCkD,CAAxC,CAAb;;AA0CA,CAAC,UAAU+B,EAAV,EAAc;EACbA,EAAE,CAACC,GAAH,CAAO,QAAP,EAAiB,iBAAjB,EAAoCzC,MAApC;AACD,CAFD,EAEGI,QAFH,E","sources":["webpack:///./js/CraftAssetFiles.js"],"sourcesContent":["var plugin = $.extend({}, Craft.Redactor.PluginBase, {\n  title: 'file',\n  apiTarget: 'plugin.craftAssetFiles.showModal',\n  icon: '<i class=\"re-icon-file\"></i>',\n  volumes: null,\n\n  showModal: function () {\n    this.saveSelection(this.app);\n\n    if (typeof this.assetSelectionModal === 'undefined') {\n      var refHandle = arguments.refHandle;\n      this.assetSelectionModal = Craft.createElementSelectorModal(\n        'craft\\\\elements\\\\Asset',\n        {\n          storageKey: 'RedactorInput.LinkToAsset',\n          sources: this.volumes,\n          criteria: {siteId: this.elementSiteId},\n          onSelect: $.proxy(function (elements) {\n            if (elements.length) {\n              this.restoreSelection(this.app);\n              const element = elements[0];\n              const selectedText = this.app.selection.getText();\n              const data = {\n                url: element.url + '#asset:' + element.id,\n                text: selectedText.length > 0 ? selectedText : element.label,\n              };\n              this.app.api('module.link.insert', data);\n            }\n          }, this),\n          closeOtherModals: false,\n        }\n      );\n    } else {\n      this.assetSelectionModal.show();\n    }\n  },\n\n  setVolumes: function (volumes) {\n    this.volumes = volumes;\n  },\n});\n\n(function ($R) {\n  $R.add('plugin', 'craftAssetFiles', plugin);\n})(Redactor);\n"],"names":["plugin","$","extend","Craft","Redactor","PluginBase","title","apiTarget","icon","volumes","showModal","saveSelection","app","assetSelectionModal","refHandle","arguments","createElementSelectorModal","storageKey","sources","criteria","siteId","elementSiteId","onSelect","proxy","elements","length","restoreSelection","element","selectedText","selection","getText","data","url","id","text","label","api","closeOtherModals","show","setVolumes","$R","add"],"sourceRoot":""}