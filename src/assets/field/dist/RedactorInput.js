(()=>{var t={229:()=>{},730:(t,e,r)=>{var o=r(229);o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[t.id,o,""]]),o.locals&&(t.exports=o.locals),(0,r(840).Z)("e09d0bc8",o,!0,{})},840:(t,e,r)=>{"use strict";function o(t,e){for(var r=[],o={},n=0;n<e.length;n++){var i=e[n],s=i[0],a={id:t+":"+n,css:i[1],media:i[2],sourceMap:i[3]};o[s]?o[s].parts.push(a):r.push(o[s]={id:s,parts:[a]})}return r}r.d(e,{Z:()=>g});var n="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!n)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var i={},s=n&&(document.head||document.getElementsByTagName("head")[0]),a=null,d=0,l=!1,c=function(){},f=null,u="data-vue-ssr-id",h="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function g(t,e,r,n){l=r,f=n||{};var s=o(t,e);return p(s),function(e){for(var r=[],n=0;n<s.length;n++){var a=s[n];(d=i[a.id]).refs--,r.push(d)}for(e?p(s=o(t,e)):s=[],n=0;n<r.length;n++){var d;if(0===(d=r[n]).refs){for(var l=0;l<d.parts.length;l++)d.parts[l]();delete i[d.id]}}}}function p(t){for(var e=0;e<t.length;e++){var r=t[e],o=i[r.id];if(o){o.refs++;for(var n=0;n<o.parts.length;n++)o.parts[n](r.parts[n]);for(;n<r.parts.length;n++)o.parts.push(b(r.parts[n]));o.parts.length>r.parts.length&&(o.parts.length=r.parts.length)}else{var s=[];for(n=0;n<r.parts.length;n++)s.push(b(r.parts[n]));i[r.id]={id:r.id,refs:1,parts:s}}}}function m(){var t=document.createElement("style");return t.type="text/css",s.appendChild(t),t}function b(t){var e,r,o=document.querySelector("style["+u+'~="'+t.id+'"]');if(o){if(l)return c;o.parentNode.removeChild(o)}if(h){var n=d++;o=a||(a=m()),e=y.bind(null,o,n,!1),r=y.bind(null,o,n,!0)}else o=m(),e=A.bind(null,o),r=function(){o.parentNode.removeChild(o)};return e(t),function(o){if(o){if(o.css===t.css&&o.media===t.media&&o.sourceMap===t.sourceMap)return;e(t=o)}else r()}}var v,C=(v=[],function(t,e){return v[t]=e,v.filter(Boolean).join("\n")});function y(t,e,r,o){var n=r?"":o.css;if(t.styleSheet)t.styleSheet.cssText=C(e,n);else{var i=document.createTextNode(n),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(i,s[e]):t.appendChild(i)}}function A(t,e){var r=e.css,o=e.media,n=e.sourceMap;if(o&&t.setAttribute("media",o),f.ssrId&&t.setAttribute(u,e.id),n&&(r+="\n/*# sourceURL="+n.sources[0]+" */",r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}}},e={};function r(o){var n=e[o];if(void 0!==n)return n.exports;var i=e[o]={id:o,exports:{}};return t[o](i,i.exports,r),i.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var o in e)r.o(e,o)&&!r.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";var t;function e(t){return function(t){if(Array.isArray(t))return n(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||o(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){if(t){if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,o=new Array(e);r<e;r++)o[r]=t[r];return o}function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}r(730),window.livePreviewHideFullscreen=!1,t=jQuery,Craft.RedactorInput=Garnish.Base.extend({id:null,linkOptions:null,volumes:null,elementSiteId:null,allSites:{},redactorConfig:null,showAllUploaders:!1,$textarea:null,redactor:null,linkOptionModals:null,enforceButtonOrder:null,init:function(r){if(this.id=r.id,this.linkOptions=r.linkOptions,this.volumes=r.volumes,this.transforms=r.transforms,this.elementSiteId=r.elementSiteId,this.allSites=r.allSites,this.redactorConfig=r.redactorConfig,this.showAllUploaders=r.showAllUploaders,this.defaultTransform=r.defaultTransform,this.linkOptionModals=[],this.redactorConfig.enforceButtonOrder&&(this.enforceButtonOrder=this.redactorConfig.enforceButtonOrder,delete this.redactorConfig.enforceButtonOrder),this.redactorConfig.lang||(this.redactorConfig.lang=r.redactorLang),this.redactorConfig.direction||(this.redactorConfig.direction=r.direction||Craft.orientation),this.redactorConfig.imageUpload=!1,this.redactorConfig.fileUpload=!1,i(this.redactorConfig.plugins)!==i([])&&(this.redactorConfig.plugins=[]),this.redactorConfig.plugins.push("craftAssetImages"),this.redactorConfig.plugins.push("craftAssetFiles"),this.redactorConfig.plugins.push("craftElementLinks"),this.redactorConfig.plugins.push("craftAssetImageEditor"),this.redactorConfig.buttons){-1!==(a=t.inArray("formatting",this.redactorConfig.buttons))&&this.redactorConfig.buttons.splice(a,1,"format");for(var o,n=["unorderedlist","orderedlist","undent","indent"],s=0;s<n.length;s++)-1!==(a=t.inArray(n[s],this.redactorConfig.buttons))&&(this.redactorConfig.buttons.splice(a,1),(void 0===o||a<o)&&(o=a));void 0!==o&&this.redactorConfig.buttons.splice(o,0,"lists")}else this.redactorConfig.buttons=["html","format","bold","italic","deleted","lists","image","file","link"];var a;if(this.redactorConfig.buttonsAddFirst&&(this.redactorConfig.buttons=this.redactorConfig.buttonsAddFirst.buttons.concat(this.redactorConfig.buttons)),this.redactorConfig.buttonsAdd&&(this.redactorConfig.buttons=this.redactorConfig.buttons.concat(this.redactorConfig.buttonsAdd.buttons)),this.redactorConfig.buttonsAddBefore)for(s=0;s<this.redactorConfig.buttons.length;s++)if(this.redactorConfig.buttons[s]==this.redactorConfig.buttonsAddBefore.before){var d;(d=this.redactorConfig.buttons).splice.apply(d,[s,0].concat(e(this.redactorConfig.buttonsAddBefore.buttons)));break}if(this.redactorConfig.buttonsAddAfter)for(s=0;s<this.redactorConfig.buttons.length;s++)if(this.redactorConfig.buttons[s]==this.redactorConfig.buttonsAddAfter.after){var l;(l=this.redactorConfig.buttons).splice.apply(l,[s+1,0].concat(e(this.redactorConfig.buttonsAddAfter.buttons)));break}delete this.redactorConfig.buttonsAddFirst,delete this.redactorConfig.buttonsAddBefore,delete this.redactorConfig.buttonsAddAfter,delete this.redactorConfig.buttonsAdd,this.redactorConfig.callbacks={started:Craft.RedactorInput.handleRedactorInit,focus:this.onEditorFocus.bind(this),blur:this.onEditorBlur.bind(this),contextbar:this.showContextBar.bind(this)},0===this.redactorConfig.buttons.length&&delete this.redactorConfig.buttons,this.initRedactor(),void 0!==Craft.Slideout&&(Garnish.on(Craft.Slideout,"open",(function(){return t("body").addClass("redactor-element-editor-open")})),Garnish.on(Craft.Slideout,"close",(function(){return t("body").removeClass("redactor-element-editor-open")})))},initRedactor:function(){var e="#"+this.id;if(this.$textarea=t(e),void 0===this.redactorConfig.toolbarFixed||this.redactorConfig.toolbarFixed){var r=this.$textarea.closest("#content");r.length&&(this.redactorConfig.toolbarFixedTarget=r)}Craft.RedactorInput.currentInstance=this,this.$textarea.redactor(this.redactorConfig),this.redactor=$R(e),void 0===this.redactorConfig.buttons&&(this.redactorConfig.buttons=[]);var n=this.redactor.toolbar.getButtonsKeys();if(-1!==this.redactorConfig.buttons.indexOf("image")&&(-1!==n.indexOf("image")?this.redactor.plugin.craftAssetImages.overrideButton("image"):this.redactor.plugin.craftAssetImages.addButton("image",this.redactorConfig.buttons.indexOf("image")),this.redactor.plugin.craftAssetImages.setTransforms(this.transforms),this.redactor.plugin.craftAssetImages.setDefaultTransform(this.defaultTransform),this.redactor.plugin.craftAssetImages.setVolumes(this.volumes),this.redactor.plugin.craftAssetImages.setElementSiteId(this.elementSiteId),this.redactor.plugin.craftAssetImages.allowAllUploaders=this.showAllUploaders),-1!==this.redactorConfig.buttons.indexOf("file")&&(-1!==n.indexOf("file")?this.redactor.plugin.craftAssetFiles.overrideButton("file"):this.redactor.plugin.craftAssetFiles.addButton("file",this.redactorConfig.buttons.indexOf("file")),this.redactor.plugin.craftAssetFiles.setVolumes(this.volumes),this.redactor.plugin.craftAssetFiles.setElementSiteId(this.elementSiteId)),-1!==n.indexOf("link")&&(this.redactor.plugin.craftElementLinks.setElementSiteId(this.elementSiteId),this.redactor.plugin.craftElementLinks.setAllSites(this.allSites),this.linkOptions.length&&this.redactor.plugin.craftElementLinks.setLinkOptions(this.linkOptions)),-1!==this.redactorConfig.plugins.indexOf("fullscreen")&&void 0!==Craft.livePreview&&!1===window.livePreviewHideFullscreen&&(window.livePreviewHideFullscreen=!0,Craft.livePreview.on("beforeEnter",(function(e){t("a.re-button.re-fullscreen").addClass("hidden")})),Craft.livePreview.on("beforeExit",(function(e){t("a.re-button.re-fullscreen").removeClass("hidden")}))),this.trigger("afterInitializeRedactor",{inputField:this}),this.enforceButtonOrder){var i=this.enforceButtonOrder,s=t(this.redactor.toolbar.getElement().nodes);if(i.length>0){var a,d=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=o(t))){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,d=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){d=!0,s=t},f:function(){try{a||null==r.return||r.return()}finally{if(d)throw s}}}}(i.reverse());try{for(d.s();!(a=d.n()).done;){var l=a.value,c=s.find("[data-re-name=".concat(l,"]"));c.length>0&&s.prepend(c)}}catch(t){d.e(t)}finally{d.f()}}}delete Craft.RedactorInput.currentInstance},onInitRedactor:function(t){this.redactor=t,this.redactor.container.getElement().addClass("focusable-input"),this.leaveFullscreenOnSaveShortcut(),this.redactor.opts.toolbarFixed&&!Craft.RedactorInput.scrollPageOnReady&&(Garnish.$doc.ready((function(){Garnish.$doc.trigger("scroll")})),Craft.RedactorInput.scrollPageOnReady=!0)},onEditorFocus:function(){this.redactor.container.getElement().trigger("focus")},onEditorBlur:function(){this.redactor.container.getElement().trigger("blur")},leaveFullscreenOnSaveShortcut:function(){void 0!==this.redactor.plugin.fullscreen&&"function"==typeof this.redactor.plugin.fullscreen.close&&Craft.cp.on("beforeSaveShortcut",t.proxy((function(){this.redactor.plugin.fullscreen.isOpen&&this.redactor.plugin.fullscreen.close()}),this))},replaceRedactorButton:function(t,e){var r=this.redactor.toolbar.getButton(t);if(r){var o=r.$icon.get(0),n=t+"_placeholder",i=this.redactor.toolbar.addButtonAfter(t,n,{title:e});r.remove();var s=this.redactor.toolbar.addButtonAfter(n,t,{title:e});return i.remove(),s.setIcon(o),s}},showContextBar:function(e,r){if(this.justResized)this.justResized=!1;else{var o=this.redactor.selection.getCurrent(),n=this.redactor.inspector.parse(o),i=function(t,e){var r=e.$contextbar.parent(),o=t.clientY+e.$contextbar.height()-10-r.offset().top+(e.livePreview?r.scrollTop():e.$win.scrollTop()),n={left:t.clientX-e.$contextbar.width()/2-r.offset().left+"px",top:o+"px"};e.$contextbar.css(n)};if(!n.isFigcaption()&&n.isComponentType("image")){var s=n.getComponent(),a=t(s).find("img");if(1===a.length){var d=d=a.attr("src").match(/#asset:(\d+)/i);if(d){var l=d[1];Craft.postActionRequest("redactor",{assetId:l},function(t){if(t.success){var o={"image-editor":{title:this.redactor.lang.get("image-editor"),api:"plugin.craftAssetImageEditor.open",args:l},edit:{title:this.redactor.lang.get("edit"),api:"module.image.open"},remove:{title:this.redactor.lang.get("delete"),api:"module.image.remove",args:s}};r.set(e,s,o)}i(e,r)}.bind(this))}}}i(e,r)}}},{handleRedactorInit:function(){Craft.RedactorInput.currentInstance.onInitRedactor(this)}})})()})();
//# sourceMappingURL=RedactorInput.js.map